{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Map{% endblock %}</h1>
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='map.css') }}"></style>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
{% endblock %}

{% block content %}
<div id="map"></div>

<script>
        const guarulhos_pos = [-23.454163, -46.534096]

        var map = L.map('map').setView(guarulhos_pos, 13)

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map)

        navigator.geolocation.getCurrentPosition(
            (pos) => {
                const { latitude, longitude } = pos.coords
                map.setView([latitude, longitude], 13)
                L.marker([latitude, longitude]).addTo(map)
                console.log(pos.coords.altitude)
            },
            (err) => {
                console.error(err)
            }, {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0,
        })
</script>
{% endblock %}