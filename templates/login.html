{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Login{% endblock %}</h1>
{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
<div class="floating-form-div">
    <form class="floating-form" method="POST" action="/login">
        <fieldset>
            <legend>Email:</legend>
            <input type="email" id="input-email" name="email" />
        </fieldset>

        <fieldset>
            <legend>Digite sua Senha:</legend>
            <input type="password" id="input-password" name="password" />
        </fieldset>

        <button class="submit-button">Logar</button>
    </form>
</div>

<script>
    function submit(ev) {
        ev.preventDefault()

        const email = document.getElementById("input-email")
        const password = document.getElementById("input-password")

        const body = {
            email, password
        }

        fetch("/login", {
            method: "POST",
            body: JSON.stringify(body),
            headers: {
                Accept: "application/json",
                "Content-Type": "application/json",
            },
        })
            .then(res => res.json())
            .then(data => {
                console.log(data)
            })
            .catch(console.error)
    }
</script>
{% endblock %}